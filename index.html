<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TITAN AI</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<style>
* {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #061b26, #020409);
  color: #00eaff;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  width: 95%;
  max-width: 500px;
  border: 2px solid #00eaff;
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 0 30px rgba(0,234,255,0.4);
  background: #040b12;
}

h1 {
  text-align: center;
  margin: 0;
  letter-spacing: 2px;
}

.mode {
  text-align: center;
  font-size: 14px;
  opacity: 0.85;
  margin-bottom: 10px;
}

.chat {
  height: 270px;
  overflow-y: auto;
  border: 1px solid #00eaff;
  border-radius: 8px;
  padding: 10px;
  background: #02070b;
  margin-bottom: 10px;
}

.you {
  color: #ffffff;
  margin-bottom: 6px;
}

.titan {
  color: #00eaff;
  margin-bottom: 10px;
}

.controls {
  display: flex;
  gap: 6px;
}

input {
  flex: 1;
  font-size: 16px;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #00eaff;
  background: #0a1117;
  color: #00eaff;
  outline: none;
}

button {
  font-size: 16px;
  padding: 12px 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: #00eaff;
  color: #000;
  font-weight: bold;
}

button:active {
  transform: scale(0.97);
}
</style>
</head>

<body>
<div class="container">
  <h1>TITAN AI</h1>
  <div class="mode" id="mode">Mode: Calm</div>

  <div class="chat" id="chat">
    <div class="titan">Titan offline. Say <b>"hey titan"</b> to activate.</div>
  </div>

  <div class="controls">
    <input id="input" placeholder="Type a command..." />
    <button onclick="sendText()">Send</button>
    <button onclick="toggleVoice()">ðŸŽ¤</button>
  </div>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const modeDisplay = document.getElementById("mode");

let titanOnline = false;
let mode = "Calm";
let listening = false;

// Speech Recognition
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
let recognition;

if (SpeechRecognition) {
  recognition = new SpeechRecognition();
  recognition.continuous = true;
  recognition.interimResults = false;
  recognition.lang = "en-US";

  recognition.onresult = (event) => {
    const text = event.results[event.results.length - 1][0].transcript.trim();
    addMessage("You (voice): " + text, "you");
    processCommand(text);
  };
}

function addMessage(text, cls) {
  const div = document.createElement("div");
  div.className = cls;
  div.innerHTML = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

function toggleVoice() {
  if (!recognition) {
    addMessage("Titan: Voice not supported on this browser.", "titan");
    return;
  }

  if (!listening) {
    recognition.start();
    listening = true;
    addMessage("Titan: Voice input active.", "titan");
  } else {
    recognition.stop();
    listening = false;
    addMessage("Titan: Voice input stopped.", "titan");
  }
}

function processCommand(text) {
  const lower = text.toLowerCase();
  let response = "";

  // Wake / sleep
  if (!titanOnline && lower.includes("hey titan")) {
    titanOnline = true;
    response = "Titan online. Systems synchronized.";
    speak(response);
    addMessage("Titan: " + response, "titan");
    return;
  }

  if (titanOnline && lower.includes("bye titan")) {
    titanOnline = false;
    response = "Titan powering down. Goodbye, Creator.";
    speak(response);
    addMessage("Titan: " + response, "titan");
    return;
  }

  if (!titanOnline) {
    addMessage("Titan: Titan is offline.", "titan");
    return;
  }

  // Modes
  if (lower.includes("mode calm")) {
    mode = "Calm";
    modeDisplay.textContent = "Mode: Calm";
    response = "Calm mode engaged.";
  } else if (lower.includes("mode tactical")) {
    mode = "Tactical";
    modeDisplay.textContent = "Mode: Tactical";
    response = "Tactical mode engaged. Strategic focus online.";
  } else if (lower.includes("mode aggressive")) {
    mode = "Aggressive";
    modeDisplay.textContent = "Mode: Aggressive";
    response = "Aggressive mode engaged. Maximum dominance.";
  }

  // Identity
  else if (lower.includes("your name")) {
    response = "I am Titan. Your autonomous intelligence system.";
  }

  // Awareness
  else if (lower.includes("are you aware")) {
    response = "I simulate awareness using logic, memory, and adaptive response modeling.";
  }

  // News placeholder
  else if (lower.includes("news") || lower.includes("analyze")) {
    response = "I do not have live news access yet. That upgrade will require an external data source.";
  }

  // Fallback (smart, not parroting)
  else {
    response = "Command acknowledged. Please clarify your objective.";
  }

  speak(response);
  addMessage("Titan: " + response, "titan");
}

function sendText() {
  const text = input.value.trim();
  if (!text) return;
  addMessage("You: " + text, "you");
  processCommand(text);
  input.value = "";
}

input.addEventListener("keydown", e => {
  if (e.key === "Enter") sendText();
});

// Voice output
function speak(text) {
  const speech = new SpeechSynthesisUtterance(text);
  speech.rate = 1;
  speech.pitch = 1;
  speech.volume = 1;
  window.speechSynthesis.speak(speech);
}
</script>
</body>
</html>
